#!/bin/bash
# SPDX-License-Identifier: GPL-2.0-or-later
# Copyright (C) 2020-present Fewtarius

. /etc/profile

BASEDTB="rk3326-rg351p-linux"
MOUNT="/flash"

flash() {
  echo "Setting ${MOUNT} ${1}"
  mount -o remount,${1} ${MOUNT}
}

on() {
  flash rw
  sed -i "s#${BASEDTB}#${BASEDTB}-oc#g" /flash/boot.ini
  flash ro
}

off() {
  flash rw
  sed -i "s#${BASEDTB}-oc#${BASEDTB}#g" /flash/boot.ini
  flash ro
}

$1
